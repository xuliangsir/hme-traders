/** * Created by liangxu on 2017/11/16. */const LoginService = require('../../controller/service/login');const ShopService = require('../../controller/service/shopService');const APIError = require('../../util/rest').APIError;const QiniuSDK = require("../../controller/sdk/qiniuCloud");const COS = require('cos-nodejs-sdk-v5');const client = require('qos-node-client');const crypto = require('crypto');var qcloud_cos = require('qcloud_cos');let appid = '10061631';let secret_id = 'AKIDyOodfIcmxmSMhgS7CeoZmD5kNXap9ylw';let secret_key = '2AxtftpiiyY2hLJjghJjhi243wFZcNme';let EXPIRED_SECONDS = 100; //过期时间let tencentyun = require('tencentyun');const qos = require('qos-node-client').default;module.exports = function(router){    router            //移动端注册            .post('/api/mobile/user/regist', async(ctx) => {                const loginService = new LoginService();                try{                    const result = await loginService.mobileRegist(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/mobile/user/login', async(ctx) => {                const loginService = new LoginService();                try{                    const result = await loginService.login(ctx);                    if(!result){                        throw new APIError(1004)                    }                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/mobile/shop/addsetinfo', async(ctx) => {                const loginService = new LoginService();                try{                    const result = await loginService.addShopsetupMobileService(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .get('/api/mobile/shop/getsetinfo', async(ctx) => {                const loginService = new LoginService();                try{                    const result = await loginService.getShopSetupInfoService(ctx);                    console.log("===11111111==result=====",result);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .get('/api/mobile/shop/service/getlist', async(ctx) => {                try{                    const result = await new LoginService().getShopServiceListMobile(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/updateshopsetup', async(ctx) => {                try{                    const result = await new LoginService().addShopsetupService(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/mobile/shop/service/getInfoById', async(ctx) => {                try{                    const result = await new ShopService().getServiceInfoById(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/mobile/shop/service/modService', async(ctx) => {                try{                    const result = await new ShopService().updateShopServiceById(ctx);                    ctx.rest(result);                }catch(e){                    throw new APIError(e);                }            })            .post('/api/mobile/shop/service/add', async(ctx) => {                const shopService = new ShopService();                try{                    const result = await new ShopService().addShopServiceMobile(ctx);                    ctx.rest(result);                }catch(e){                    console.log("shopService====add==",e);                    throw new APIError(e);                }            })            .post('/api/mobile/user/modpassword', async(ctx) => {                try{                    const result = await new LoginService().modPassword(ctx);                    ctx.rest(result);                }catch(e){                    console.log("modpassword======",e);                    throw new APIError(e);                }            })            .post('/api/mobile/user/modpassword', async(ctx) => {                try{                    const result = await new LoginService().modPassword(ctx);                    ctx.rest(result);                }catch(e){                    console.log("modpassword======",e);                    throw new APIError(e);                }            })            .post('/api/mobile/shop/delservicebyId', async(ctx) => {                try{                    const result = await new ShopService().delShopServiceByIdMobile(ctx);                    ctx.rest(result);                }catch(e){                    console.log("modpassword======",e);                    throw new APIError(e);                }            })};